#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>

int main()
{
    printf("Name: Alisha Khatri\n");
    printf("Roll no: 03\n");
    printf("Lab no: 10\n");

    char expr[100];
    char symbols[50];      // store unique identifiers
    void *addresses[50];   // store "addresses"
    int count = 0;

    printf("\nEnter an expression (end with $): ");

    // Read until $
    int i = 0;
    char ch;
    while((ch = getchar()) != '$' && i < 99)
    {
        expr[i] = ch;
        i++;
    }
    expr[i] = '\0';

    printf("\nGiven expression: %s\n", expr);

    // Scan for identifiers (letters only)
    for(i = 0; expr[i] != '\0'; i++)
    {
        if(isalpha(expr[i]))
        {
            // Check if already in symbols
            int found = 0;
            for(int k = 0; k < count; k++)
            {
                if(symbols[k] == expr[i])
                {
                    found = 1;
                    break;
                }
            }
            if(!found)
            {
                symbols[count] = expr[i];
                addresses[count] = malloc(1); // simulate memory allocation
                count++;
            }
        }
    }

    // Print symbol table
    printf("\nSymbol Table:\n");
    printf("Symbol\tAddress\t\tType\n");
    for(i = 0; i < count; i++)
    {
        printf("%c\t%p\tidentifier\n", symbols[i], addresses[i]);
    }

    // Search for a symbol
    char srch;
    printf("\nEnter symbol to search: ");
    scanf(" %c", &srch);

    int found = 0;
    for(i = 0; i < count; i++)
    {
        if(symbols[i] == srch)
        {
            printf("\nSymbol found: %c\t%p\tidentifier\n", symbols[i], addresses[i]);
            found = 1;
            break;
        }
    }
    if(!found)
        printf("\nSymbol not found in table.\n");

    // Free allocated memory
    for(i = 0; i < count; i++)
        free(addresses[i]);

    return 0;
}
